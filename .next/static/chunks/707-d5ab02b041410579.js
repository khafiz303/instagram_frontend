"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{4619:function(e,t,n){n.d(t,{N:function(){return r}});let r="http://46.101.192.129:1000"},3659:function(e,t,n){n.d(t,{Bd:function(){return x},Ir:function(){return N},Nk:function(){return C},Q5:function(){return R},YF:function(){return A},dq:function(){return S},fR:function(){return h},gQ:function(){return E},j:function(){return v},qb:function(){return g}});var r=n(8160),a=n(3598),i=n(4619);let s=(0,r.oM)({name:"post",initialState:{posts:[],post:{comments:[]},allPost:[],likes:[]},reducers:{getMyPosts:(e,t)=>{e.posts=t.payload.posts},createMyPost:(e,t)=>{e.posts.push(t.payload.post)},deleteMyPost:(e,t)=>{let n=[...e.posts];n=n.filter(e=>e.id!==t.payload),e.posts=n},setPost:(e,t)=>{e.post=t.payload.post},setComment:(e,t)=>{let n=t.payload.comment;e.post.comments.push(n)},deletedComment:(e,t)=>{let n=e.post.comments.filter(e=>e.id!==t.payload);e.post.comments=n},setAllPosts:(e,t)=>{e.allPost=t.payload.postsAll},setLike:(e,t)=>{e.likes=[...e.likes,t.payload]},deletedLike:(e,t)=>{let n=[...e.likes];n.filter(e=>e.postId!=t.payload),e.likes=n}}}),{getMyPosts:o,createMyPost:c,deleteMyPost:l,setPost:d,setComment:u,deletedComment:p,setAllPosts:_,setLike:f,deletedLike:m}=s.actions,E=()=>async e=>{try{let t=await a.Z.get("".concat(i.N,"/api/posts/my"));e(o({posts:t.data}))}catch(e){alert("Запрос на сервер не удался")}},g=e=>async t=>{try{let n=await a.Z.post("".concat(i.N,"/api/post/create"),e);t(c({post:n.data}))}catch(e){alert("Запрос на сервер не удался")}},h=e=>async t=>{try{await a.Z.delete("".concat(i.N,"/api/post/delete/").concat(e)),t(l(e))}catch(e){alert("Запрос на сервер не удался")}},R=e=>async t=>{try{let n=await a.Z.get("".concat(i.N,"/api/post/").concat(e));t(d({post:n.data}))}catch(e){alert("Запрос на сервер не удался")}},S=(e,t)=>async n=>{console.log(e),console.log();try{await a.Z.put("".concat(i.N,"/api/post/").concat(e),t)}catch(e){console.log(e),alert("Запрос на сервер не удался")}},N=e=>async t=>{try{let n=await a.Z.post("".concat(i.N,"/api/add-comment"),e);t(u({comment:n.data}))}catch(e){console.log(e),alert("Запрос на сервер не удался")}},A=e=>async t=>{console.log("request id:",e);try{await a.Z.delete("".concat(i.N,"/api/delete-comment/").concat(e)),t(p(e))}catch(e){console.log(e),alert("Запрос на сервер не удался")}},x=()=>async e=>{try{let t=await a.Z.get("".concat(i.N,"/api/posts/all"));e(_({postsAll:t.data})),console.log("datd",t.data)}catch(e){console.log(e),alert("Запрос на сервер не удался")}},v=e=>async t=>{try{let n=await a.Z.post("".concat(i.N,"/api/post/like"),e);t(f(n.data))}catch(e){console.log(e),alert(e.response&&e.response.data.error)}},C=e=>async t=>{try{await a.Z.delete("".concat(i.N,"/api/post/like/").concat(e)),t(m(e))}catch(e){console.log(e),alert("Запрос на сервер не удался")}};t.ZP=s.reducer},2707:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(7821);n(8121);var a=n(8078),i=n(3659),s=n(6878),o=n(168);function c(e){let{item:t,user:n,setCreatePost:c,name:l,create:d,edit:u,post:p}=e,[_,f]=(0,a.useState)(null),[m,E]=(0,a.useState)("filter-original"),[g,h]=(0,a.useState)(0),[R,S]=(0,a.useState)(null),[N,A]=(0,a.useState)(""),{username:x}=(0,o.useParams)(),[v,C]=(0,a.useState)(""),{id:P}=(0,o.useParams)();console.log("id:",P);let T=(0,s.I0)(),I=(0,o.useRouter)(),j=e=>{let t=e.target.files[0];S(t),C(URL.createObjectURL(t)),f(t),console.log(_),console.log(v)},O=e=>{E(e)};return d&&!u?(0,r.jsxs)("div",{className:"card ".concat(null!==_?"active":""),children:[(0,r.jsxs)("div",{className:"header-post",children:[(0,r.jsx)("p",{onClick:()=>{c(0)},children:"Cancel"}),(0,r.jsx)("p",{children:"Create new post"}),(0,r.jsx)("p",{onClick:()=>{if(0===g)h(1);else if(1===g){let e=new FormData;e.append("imageUrl",R),e.append("description",N),T((0,i.qb)(e)),c(0),I.push("/home")}},children:"next"})," "]}),(0,r.jsxs)("div",{className:"post-c-img",children:[(0,r.jsx)("input",{type:"file",id:"fileInput",onChange:j}),null===_&&(0,r.jsx)("label",{htmlFor:"fileInput",className:"custom-file-label button",children:"Select from computer"})]}),_&&(0,r.jsxs)("div",{className:"pic ".concat(1===g?"ai-t":""),children:[(0,r.jsxs)("div",{className:"preview ".concat(m),children:[(0,r.jsx)("img",{src:v,alt:"Selected"})," "]}),0===g&&(0,r.jsxs)("div",{className:"filters",children:[(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-original"),children:"Original"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-clarendon"),children:"Clarendon"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-gingham"),children:"Gingham"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-moon"),children:"Moon"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-lark"),children:"Lark"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-reyes"),children:"Reyes"})]}),1===g&&(0,r.jsxs)("div",{className:"caption",children:[(0,r.jsxs)("div",{className:"caption-img",children:[(0,r.jsx)("img",{src:"/images/Profile-Pic-S.png",alt:"Profile Pic"}),(0,r.jsx)("p",{children:l})]}),(0,r.jsx)("div",{className:"input-caption",children:(0,r.jsx)("input",{placeholder:"Write a caption..",value:N,onChange:e=>A(e.target.value)})})]})]})]}):!d&&u?(0,r.jsxs)("div",{className:"card ".concat(null!==_?"active":""),children:[(0,r.jsxs)("div",{className:"header-post",children:[(0,r.jsx)("p",{onClick:()=>{I.push("/home")},children:"Cancel"}),(0,r.jsx)("p",{children:"Edit post"}),(0,r.jsx)("p",{onClick:()=>{if(0===g)h(1);else if(1===g){let e=new FormData;e.append("imageUrl",R),e.append("description",N),e.append("id",P),T((0,i.dq)(P,e)),c(0),I.push("/home")}},children:"next"})]}),(0,r.jsxs)("div",{className:"post-c-img",id:"post-c-img",children:[(0,r.jsx)("input",{type:"file",id:"fileInput",onChange:j}),null===_&&(0,r.jsx)("label",{htmlFor:"fileInput",className:"custom-file-label button",children:"Change photo in post"})]}),(0,r.jsxs)("div",{className:"pic ".concat(1===g?"ai-t":""),children:[(0,r.jsxs)("div",{className:"preview ".concat(m),children:[_&&(0,r.jsx)("img",{src:v}),null==_&&(0,r.jsx)("img",{src:"http://46.101.192.129:1000".concat(p.imageUrl),alt:"Post"})]}),0===g&&(0,r.jsxs)("div",{className:"filters",children:[(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-original"),children:"Original"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-clarendon"),children:"Clarendon"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-gingham"),children:"Gingham"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-moon"),children:"Moon"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-lark"),children:"Lark"}),(0,r.jsx)("div",{className:"filter",onClick:()=>O("filter-reyes"),children:"Reyes"})]}),1===g&&(0,r.jsxs)("div",{className:"caption",children:[(0,r.jsxs)("div",{className:"caption-img",children:[(0,r.jsx)("img",{src:"/images/Profile-Pic-S.png",alt:"Profile Pic"}),(0,r.jsx)("p",{children:l})]}),(0,r.jsx)("div",{className:"input-caption",children:(0,r.jsx)("input",{placeholder:"Write a caption..",value:N,onChange:e=>A(e.target.value)})})]})]})]}):null}},8121:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ACTION_SUFFIX:function(){return o},APP_DIR_ALIAS:function(){return P},CACHE_ONE_YEAR:function(){return R},DOT_NEXT_ALIAS:function(){return v},ESLINT_DEFAULT_DIRS:function(){return B},ESLINT_PROMPT_VALUES:function(){return V},GSP_NO_RETURNED_VALUE:function(){return F},GSSP_COMPONENT_MEMBER_ERROR:function(){return U},GSSP_NO_RETURNED_VALUE:function(){return G},INSTRUMENTATION_HOOK_FILENAME:function(){return A},MIDDLEWARE_FILENAME:function(){return S},MIDDLEWARE_LOCATION_REGEXP:function(){return N},NEXT_BODY_SUFFIX:function(){return d},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return h},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return _},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return f},NEXT_CACHE_SOFT_TAGS_HEADER:function(){return p},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return g},NEXT_CACHE_TAGS_HEADER:function(){return u},NEXT_CACHE_TAG_MAX_ITEMS:function(){return m},NEXT_CACHE_TAG_MAX_LENGTH:function(){return E},NEXT_DATA_SUFFIX:function(){return c},NEXT_META_SUFFIX:function(){return l},NEXT_QUERY_PARAM_PREFIX:function(){return n},NON_STANDARD_NODE_ENV:function(){return H},PAGES_DIR_ALIAS:function(){return x},PRERENDER_REVALIDATE_HEADER:function(){return r},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return a},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return L},ROOT_DIR_ALIAS:function(){return C},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return y},RSC_ACTION_ENCRYPTION_ALIAS:function(){return O},RSC_ACTION_PROXY_ALIAS:function(){return j},RSC_ACTION_VALIDATE_ALIAS:function(){return I},RSC_MOD_REF_PROXY_ALIAS:function(){return T},RSC_PREFETCH_SUFFIX:function(){return i},RSC_SUFFIX:function(){return s},SERVER_PROPS_EXPORT_ERROR:function(){return M},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return k},SERVER_PROPS_SSG_CONFLICT:function(){return w},SERVER_RUNTIME:function(){return Z},SSG_FALLBACK_EXPORT_ERROR:function(){return Y},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return D},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return b},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return X},WEBPACK_LAYERS:function(){return q},WEBPACK_RESOURCE_QUERIES:function(){return K}});let n="nxtP",r="x-prerender-revalidate",a="x-prerender-revalidate-if-generated",i=".prefetch.rsc",s=".rsc",o=".action",c=".json",l=".meta",d=".body",u="x-next-cache-tags",p="x-next-cache-soft-tags",_="x-next-revalidated-tags",f="x-next-revalidate-tag-token",m=64,E=256,g=1024,h="_N_T_",R=31536e3,S="middleware",N=`(?:src/)?${S}`,A="instrumentation",x="private-next-pages",v="private-dot-next",C="private-next-root-dir",P="private-next-app-dir",T="private-next-rsc-mod-ref-proxy",I="private-next-rsc-action-validate",j="private-next-rsc-server-reference",O="private-next-rsc-action-encryption",y="private-next-rsc-action-client-wrapper",L="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",D="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",k="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",w="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",b="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",M="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",F="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",G="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",X="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",U="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",H='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',Y="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",B=["app","pages","components","lib","src"],V=[{title:"Strict",recommended:!0,config:{extends:"next/core-web-vitals"}},{title:"Base",config:{extends:"next"}},{title:"Cancel",config:null}],Z={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},W={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"},q={...W,GROUP:{serverOnly:[W.reactServerComponents,W.actionBrowser,W.appMetadataRoute,W.appRouteHandler,W.instrument],clientOnly:[W.serverSideRendering,W.appPagesBrowser],nonClientServerTarget:[W.middleware,W.api],app:[W.reactServerComponents,W.actionBrowser,W.appMetadataRoute,W.appRouteHandler,W.serverSideRendering,W.appPagesBrowser,W.shared,W.instrument]}},K={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}}]);