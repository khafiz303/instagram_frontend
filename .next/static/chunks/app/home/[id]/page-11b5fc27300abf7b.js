(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[651],{6900:function(t,e,o){Promise.resolve().then(o.bind(o,5803))},4619:function(t,e,o){"use strict";o.d(e,{N:function(){return a}});let a="http://46.101.192.129:1000"},5803:function(t,e,o){"use strict";o.r(e);var a=o(7821),s=o(8078),n=o(168),c=o(6878),l=o(9699),i=o(3659);e.default=()=>{let[t,e]=(0,s.useState)(""),o=(0,n.useRouter)(),{id:r}=(0,n.useParams)(),d=(0,c.v9)(t=>t.post.post),u=(0,c.v9)(t=>t.post.post.comments);console.log("post:",d);let p=(0,c.I0)(),m=()=>{p((0,i.Q5)(r))};(0,s.useEffect)(()=>{m()},[u]);let h=(0,c.v9)(t=>{var e;return null===(e=t.auth.currentUser)||void 0===e?void 0:e.id});return(0,a.jsxs)("div",{className:"modal",children:[(0,a.jsx)("div",{className:"modal-white-drop",onClick:()=>{o.push("/home")},children:"   "}),(0,a.jsxs)("div",{className:"modal-inner",id:"modal-inner",children:[(0,a.jsx)("div",{className:"main-img main-img-home",children:(0,a.jsx)("img",{src:"http://46.101.192.129:1000".concat(d.imageUrl)})}),(0,a.jsxs)("div",{className:"modal-right modal-right-home",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)(l.Z,{username:d.user&&d.user.fullName,close:()=>setPostDetail(null),selectedPost:d.id,shadow:"shadow",dop:"..."}),(0,a.jsx)("p",{children:d.description})]}),(0,a.jsxs)("div",{className:"comments",children:[(0,a.jsx)("div",{className:"comment",children:d.comments.map((t,e)=>{var o,s,n;return(0,a.jsx)(l.Z,{username:null===(o=t.userC)||void 0===o?void 0:o.fullName,text:t.text,remove:h==(null===(s=t.userC)||void 0===s?void 0:s.id)?"remove":void 0,deleted:h==(null===(n=t.userC)||void 0===n?void 0:n.id)?()=>p((0,i.YF)(t.id)):void 0},e)})}),(0,a.jsxs)("div",{className:"add-comment",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add a comment",value:t,onChange:t=>e(t.target.value)}),(0,a.jsx)("p",{onClick:()=>{p((0,i.Ir)({postId:r,text:t})),e("")},children:"Post"})]})]})]})]})]})}},3659:function(t,e,o){"use strict";o.d(e,{Bd:function(){return k},Ir:function(){return j},Nk:function(){return P},Q5:function(){return N},YF:function(){return x},dq:function(){return w},fR:function(){return v},gQ:function(){return f},j:function(){return Z},qb:function(){return y}});var a=o(8160),s=o(3598),n=o(4619);let c=(0,a.oM)({name:"post",initialState:{posts:[],post:{comments:[]},allPost:[],likes:[]},reducers:{getMyPosts:(t,e)=>{t.posts=e.payload.posts},createMyPost:(t,e)=>{t.posts.push(e.payload.post)},deleteMyPost:(t,e)=>{let o=[...t.posts];o=o.filter(t=>t.id!==e.payload),t.posts=o},setPost:(t,e)=>{t.post=e.payload.post},setComment:(t,e)=>{let o=e.payload.comment;t.post.comments.push(o)},deletedComment:(t,e)=>{let o=t.post.comments.filter(t=>t.id!==e.payload);t.post.comments=o},setAllPosts:(t,e)=>{t.allPost=e.payload.postsAll},setLike:(t,e)=>{t.likes=[...t.likes,e.payload]},deletedLike:(t,e)=>{let o=[...t.likes];o.filter(t=>t.postId!=e.payload),t.likes=o}}}),{getMyPosts:l,createMyPost:i,deleteMyPost:r,setPost:d,setComment:u,deletedComment:p,setAllPosts:m,setLike:h,deletedLike:g}=c.actions,f=()=>async t=>{try{let e=await s.Z.get("".concat(n.N,"/api/posts/my"));t(l({posts:e.data}))}catch(t){alert("Запрос на сервер не удался")}},y=t=>async e=>{try{let o=await s.Z.post("".concat(n.N,"/api/post/create"),t);e(i({post:o.data}))}catch(t){alert("Запрос на сервер не удался")}},v=t=>async e=>{try{await s.Z.delete("".concat(n.N,"/api/post/delete/").concat(t)),e(r(t))}catch(t){alert("Запрос на сервер не удался")}},N=t=>async e=>{try{let o=await s.Z.get("".concat(n.N,"/api/post/").concat(t));e(d({post:o.data}))}catch(t){alert("Запрос на сервер не удался")}},w=(t,e)=>async o=>{console.log(t),console.log();try{await s.Z.put("".concat(n.N,"/api/post/").concat(t),e)}catch(t){console.log(t),alert("Запрос на сервер не удался")}},j=t=>async e=>{try{let o=await s.Z.post("".concat(n.N,"/api/add-comment"),t);e(u({comment:o.data}))}catch(t){console.log(t),alert("Запрос на сервер не удался")}},x=t=>async e=>{console.log("request id:",t);try{await s.Z.delete("".concat(n.N,"/api/delete-comment/").concat(t)),e(p(t))}catch(t){console.log(t),alert("Запрос на сервер не удался")}},k=()=>async t=>{try{let e=await s.Z.get("".concat(n.N,"/api/posts/all"));t(m({postsAll:e.data})),console.log("datd",e.data)}catch(t){console.log(t),alert("Запрос на сервер не удался")}},Z=t=>async e=>{try{let o=await s.Z.post("".concat(n.N,"/api/post/like"),t);e(h(o.data))}catch(t){console.log(t),alert(t.response&&t.response.data.error)}},P=t=>async e=>{try{await s.Z.delete("".concat(n.N,"/api/post/like/").concat(t)),e(g(t))}catch(t){console.log(t),alert("Запрос на сервер не удался")}};e.ZP=c.reducer},2841:function(t,e,o){"use strict";o.d(e,{$e:function(){return v},Ai:function(){return m},FH:function(){return f},PX:function(){return h},fv:function(){return y},nX:function(){return g},vt:function(){return N}});var a=o(8160),s=o(3598),n=o(4619);let c=(0,a.oM)({name:"profile",initialState:{profile:{},following:[],MyFollowing:[],followers:[],suggestions:[]},reducers:{setProfile:(t,e)=>{t.profile=e.payload},setFollowing:(t,e)=>{t.following=e.payload},setFollowers:(t,e)=>{t.followers=e.payload},addFollow:(t,e)=>{t.followers=[...t.followers,e.payload]},setMyFollowing:(t,e)=>{t.MyFollowing=e.payload},setSuggestions:(t,e)=>{t.suggestions=e.payload}}}),{setProfile:l,setFollowing:i,setFollowers:r,addFollow:d,setMyFollowing:u,setSuggestions:p}=c.actions,m=t=>async e=>{try{let o=await s.Z.get("".concat(n.N,"/api/user/").concat(t));e(l(o.data)),console.log(o.data)}catch(t){console.log(t)}},h=t=>async e=>{try{console.log("iddd",t);let o=await s.Z.post("".concat(n.N,"/api/follow"),{id:t});e(d(o.data))}catch(t){console.log(t)}},g=t=>async e=>{try{let o=await s.Z.get("".concat(n.N,"/api/users/").concat(t,"/following"));e(i(o.data))}catch(t){console.log(t,"jh,dgskvkv")}},f=t=>async e=>{try{let o=await s.Z.get("".concat(n.N,"/api/users/").concat(t,"/following"));e(u(o.data))}catch(t){console.log(t,"jh,dgskvkv")}},y=t=>async e=>{try{await s.Z.delete("".concat(n.N,"/api/unsubscribe/").concat(t))}catch(t){console.log(t)}},v=t=>async e=>{try{let o=await s.Z.get("".concat(n.N,"/api/users/").concat(t,"/followers"));e(r(o.data))}catch(t){console.log(t)}},N=()=>async t=>{try{let e=await s.Z.get("".concat(n.N,"/api/suggestions"));t(p(e.data))}catch(t){console.log(t)}};e.ZP=c.reducer},9699:function(t,e,o){"use strict";o.d(e,{Z:function(){return r}});var a=o(7821),s=o(8078),n=o(6878),c=o(3659),l=o(168);o(2841);var i=o(4233);function r(t){let{username:e,shadow:o,dop:r,text:d,remove:u,follow:p,size:m,imgSize:h,selectedPost:g,deleted:f,close:y,follower:v,myFollowing:N,following:w,link:j,userId:x}=t,[k,Z]=(0,s.useState)(!1),P=(0,l.useRouter)(),C=(0,n.I0)(),b=(0,n.v9)(t=>{var e;return null===(e=t.auth.currentUser)||void 0===e?void 0:e.id});return(0,a.jsxs)("div",{className:"user-mini ".concat(o," ").concat(m),children:[(0,a.jsxs)("div",{className:"user-m-img",children:[(0,a.jsx)("img",{src:"/images/ink.png",alt:"Profile Picture",className:h}),!p&&(0,a.jsx)("p",{children:e}),p&&(0,a.jsx)("div",{className:"df",children:j?(0,a.jsx)(i.default,{href:"/profile/".concat(e),children:(0,a.jsx)("p",{children:e})}):(0,a.jsx)("p",{children:e})})]}),(0,a.jsxs)("div",{children:[d&&(0,a.jsx)("p",{children:d}),r&&x==b&&(0,a.jsx)("span",{onClick:()=>{Z(!0)},children:r}),u&&(0,a.jsx)("button",{className:"button btn-mini",onClick:f,children:u?"remove":""})]}),k&&(0,a.jsxs)("div",{className:"toggle",children:[(0,a.jsx)("div",{onClick:()=>P.push("/edit-post/"+g),children:(0,a.jsx)("p",{children:"Edit"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{onClick:()=>{C((0,c.fR)(g)),y()},children:"Delete"})})]})]})}}},function(t){t.O(0,[314,178,115,205,744],function(){return t(t.s=6900)}),_N_E=t.O()}]);