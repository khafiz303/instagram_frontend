(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{6929:function(e,s,l){Promise.resolve().then(l.bind(l,4099))},4099:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return h}});var n=l(7821),i=l(6796),t=l(2707),o=l(8078),a=l(9699),r=l(8927),c=l(4233),d=l(6878),u=l(3659),m=l(168);function h(){let[e,s]=(0,o.useState)(),[l,h]=(0,o.useState)(!0),[g,v]=(0,o.useState)(0),f=(0,o.useRef)(null),[p,x]=(0,o.useState)(null),[j,N]=(0,o.useState)(""),[w,y]=(0,o.useState)([]),[P,k]=(0,o.useState)(!1),[F,C]=(0,o.useState)(""),[b,Z]=(0,o.useState)(""),S=(0,d.I0)();(0,m.useRouter)();let E=(0,d.v9)(e=>e.post.posts),I=E.length,_=(0,d.v9)(e=>{var s;return null===(s=e.auth.currentUser)||void 0===s?void 0:s.username}),A=(0,d.v9)(e=>e.post.post.comments),M=(0,d.v9)(e=>e.post.post);(0,o.useEffect)(()=>{y([...w,A])},[A,M]),(0,o.useEffect)(()=>{function e(e){f.current&&!f.current.contains(e.target)&&v(0)}return 1===g?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[g]),(0,o.useEffect)(()=>{S((0,u.gQ)())},[]);let U=()=>{x(null),k(!1)},X=e=>{S((0,u.YF)(e))};return(0,o.useEffect)(()=>{C(_||"username")},[_]),(0,n.jsxs)("div",{className:"profile",children:[(0,n.jsxs)("div",{className:"header profile-header",children:[(0,n.jsx)("div",{className:"profile-header-logo",children:(0,n.jsx)("img",{src:"/images/logo-profile.png",alt:"Profile Logo"})}),(0,n.jsxs)("div",{className:"header-search",children:[(0,n.jsx)("img",{src:"/images/vector.png",alt:"Search Icon"}),(0,n.jsx)("input",{placeholder:"Search"})]}),(0,n.jsxs)("div",{className:"header-nav",children:[(0,n.jsx)(c.default,{href:"home",children:(0,n.jsx)("img",{src:"/images/home.png",alt:"Home Icon"})}),(0,n.jsx)("img",{src:"/images/message.png",alt:"Message Icon"}),(0,n.jsx)("img",{onClick:()=>v(1),src:"/images/NewPosts.png",alt:"New Posts Icon"}),(0,n.jsx)("img",{src:"/images/FindPeople.png",alt:"Find People Icon"}),(0,n.jsx)("img",{src:"/images/ActivityFeed.png",alt:"Activity Feed Icon"}),(0,n.jsx)("img",{src:"/images/Profile-Pic-S.png",alt:"Profile Picture"})]})]}),(0,n.jsxs)("div",{className:"main-p",children:[(0,n.jsx)("div",{className:"main-p-left",children:(0,n.jsx)("img",{src:"/images/Profile.png",alt:"Profile Image"})}),(0,n.jsxs)("div",{className:"main-p-right",children:[(0,n.jsxs)("div",{className:"user-info-up",children:[(0,n.jsx)("h1",{children:F}),(0,n.jsx)("button",{className:"button",children:"Follow"}),(0,n.jsx)("span",{children:"..."})]}),(0,n.jsxs)("div",{className:"user-info-center",children:[(0,n.jsxs)("p",{children:[I," posts"]}),(0,n.jsx)("p",{onClick:()=>k(!0),children:"3M followers"}),(0,n.jsx)("p",{children:"1123 following"})]}),(0,n.jsx)("p",{children:F})]})]}),1===g&&(0,n.jsx)("div",{ref:f,children:(0,n.jsx)(t.Z,{setCreatePost:v,username:F,create:!0,edit:!1})}),(0,n.jsx)(i.Z,{posts:E,onClickPost:e=>{let l=E.find(s=>s.id===e.id);l&&(Z(l.description),x(l),y(l.comments),s(l.id))}}),null!==p&&(0,n.jsxs)("div",{className:"modal",children:[(0,n.jsx)("div",{className:"modal-white-drop",onClick:U}),(0,n.jsxs)("div",{className:"modal-inner",children:[(0,n.jsx)("div",{className:"modal-img",children:(0,n.jsx)("img",{src:"http://46.101.192.129:1000".concat(p.imageUrl),alt:"Post"})}),(0,n.jsxs)("div",{className:"modal-right",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)(a.Z,{username:F,close:()=>x(null),selectedPost:p.id,shadow:"shadow",dop:"..."}),(0,n.jsx)("p",{children:b})]}),(0,n.jsxs)("div",{className:"comments",children:[(0,n.jsx)("div",{className:"comment",children:w.map((e,s)=>{var l;return(0,n.jsx)(a.Z,{username:null===(l=e.userC)||void 0===l?void 0:l.fullName,text:e.text,remove:"remove",deleted:()=>X(e.id)},s)})}),(0,n.jsxs)("div",{className:"add-comment",children:[(0,n.jsx)("input",{type:"text",placeholder:"Add a comment",onChange:e=>{N(e.target.value)},value:j}),(0,n.jsx)("p",{onClick:()=>{S((0,u.Ir)({text:j,postId:e})),N("")},children:"Post"})]})]})]})]})]}),P&&(0,n.jsx)(r.Z,{follow:"Followers",close:U})]})}},2841:function(e,s,l){"use strict";l.d(s,{$e:function(){return x},Ai:function(){return h},FH:function(){return f},PX:function(){return g},fv:function(){return p},nX:function(){return v},vt:function(){return j}});var n=l(8160),i=l(3598),t=l(4619);let o=(0,n.oM)({name:"profile",initialState:{profile:{},following:[],MyFollowing:[],followers:[],suggestions:[]},reducers:{setProfile:(e,s)=>{e.profile=s.payload},setFollowing:(e,s)=>{e.following=s.payload},setFollowers:(e,s)=>{e.followers=s.payload},addFollow:(e,s)=>{e.followers=[...e.followers,s.payload]},setMyFollowing:(e,s)=>{e.MyFollowing=s.payload},setSuggestions:(e,s)=>{e.suggestions=s.payload}}}),{setProfile:a,setFollowing:r,setFollowers:c,addFollow:d,setMyFollowing:u,setSuggestions:m}=o.actions,h=e=>async s=>{try{let l=await i.Z.get("".concat(t.N,"/api/user/").concat(e));s(a(l.data)),console.log(l.data)}catch(e){console.log(e)}},g=e=>async s=>{try{console.log("iddd",e);let l=await i.Z.post("".concat(t.N,"/api/follow"),{id:e});s(d(l.data))}catch(e){console.log(e)}},v=e=>async s=>{try{let l=await i.Z.get("".concat(t.N,"/api/users/").concat(e,"/following"));s(r(l.data))}catch(e){console.log(e,"jh,dgskvkv")}},f=e=>async s=>{try{let l=await i.Z.get("".concat(t.N,"/api/users/").concat(e,"/following"));s(u(l.data))}catch(e){console.log(e,"jh,dgskvkv")}},p=e=>async s=>{try{await i.Z.delete("".concat(t.N,"/api/unsubscribe/").concat(e))}catch(e){console.log(e)}},x=e=>async s=>{try{let l=await i.Z.get("".concat(t.N,"/api/users/").concat(e,"/followers"));s(c(l.data))}catch(e){console.log(e)}},j=()=>async e=>{try{let s=await i.Z.get("".concat(t.N,"/api/suggestions"));e(m(s.data))}catch(e){console.log(e)}};s.ZP=o.reducer},8927:function(e,s,l){"use strict";l.d(s,{Z:function(){return r}});var n=l(7821),i=l(6878),t=l(8078),o=l(168),a=l(2841);function r(e){let{close:s,follow:l}=e,r=(0,i.v9)(e=>e.profile.followers)||[],c=(0,i.v9)(e=>e.profile.MyFollowing)||[],d=(0,i.v9)(e=>e.auth.currentUser),u=(0,i.I0)(),{username:m}=(0,o.useParams)();(0,t.useEffect)(()=>{u((0,a.nX)(m)),u((0,a.$e)(m)),u((0,a.FH)(null==d?void 0:d.username))},[m,null==d?void 0:d.username,u,r]);let h=e=>c.some(s=>s.userFollower.id===e),g=[];return g=[...r].sort((e,s)=>{var l,n;return null===(n=e.userFollowing)||void 0===n?void 0:n.fullName.localeCompare(null===(l=s.userFollowing)||void 0===l?void 0:l.fullName)}),(0,n.jsxs)("div",{className:"modal",children:[(0,n.jsx)("div",{className:"modal-white-drop",onClick:s}),(0,n.jsxs)("div",{className:"modal-inner-mini",children:[(0,n.jsxs)("div",{className:"header-follow",children:[(0,n.jsx)("span",{}),(0,n.jsx)("h2",{children:l}),(0,n.jsx)("span",{onClick:s,children:"X"})]}),(0,n.jsx)("div",{children:Array.isArray(g)&&g.length>0?g.map(e=>{var s;return(0,n.jsxs)("div",{className:"follow",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"/images/ink.png",alt:"User Avatar"}),(0,n.jsx)("p",{children:null===(s=e.userFollowing)||void 0===s?void 0:s.fullName})]}),h(e.user_id)?(0,n.jsx)("button",{className:"button btn-mini",onClick:()=>u((0,a.fv)(e.user_id)),children:"Following"}):(0,n.jsx)("button",{className:"button btn-mini-blue",onClick:()=>u((0,a.PX)(e.user_id)),children:"Follow"})]},e.user_id)}):null})]})]})}},6796:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});var n=l(7821);function i(e){let{item:s,posts:l,onClickPost:i}=e;return(0,n.jsx)("div",{className:"post-img",onClick:()=>i(s),children:s&&s.imageUrl&&(0,n.jsx)("img",{src:"http://46.101.192.129:1000".concat(s.imageUrl),alt:"Post"})})}function t(e){let{posts:s,onClickPost:l}=e,t=s.map(e=>(0,n.jsx)(i,{item:e,onClickPost:l},e.id));return(0,n.jsx)("div",{className:"profile-posts",children:t})}},9699:function(e,s,l){"use strict";l.d(s,{Z:function(){return c}});var n=l(7821),i=l(8078),t=l(6878),o=l(3659),a=l(168);l(2841);var r=l(4233);function c(e){let{username:s,shadow:l,dop:c,text:d,remove:u,follow:m,size:h,imgSize:g,selectedPost:v,deleted:f,close:p,follower:x,myFollowing:j,following:N,link:w,userId:y}=e,[P,k]=(0,i.useState)(!1),F=(0,a.useRouter)(),C=(0,t.I0)(),b=(0,t.v9)(e=>{var s;return null===(s=e.auth.currentUser)||void 0===s?void 0:s.id});return(0,n.jsxs)("div",{className:"user-mini ".concat(l," ").concat(h),children:[(0,n.jsxs)("div",{className:"user-m-img",children:[(0,n.jsx)("img",{src:"/images/ink.png",alt:"Profile Picture",className:g}),!m&&(0,n.jsx)("p",{children:s}),m&&(0,n.jsx)("div",{className:"df",children:w?(0,n.jsx)(r.default,{href:"/profile/".concat(s),children:(0,n.jsx)("p",{children:s})}):(0,n.jsx)("p",{children:s})})]}),(0,n.jsxs)("div",{children:[d&&(0,n.jsx)("p",{children:d}),c&&y==b&&(0,n.jsx)("span",{onClick:()=>{k(!0)},children:c}),u&&(0,n.jsx)("button",{className:"button btn-mini",onClick:f,children:u?"remove":""})]}),P&&(0,n.jsxs)("div",{className:"toggle",children:[(0,n.jsx)("div",{onClick:()=>F.push("/edit-post/"+v),children:(0,n.jsx)("p",{children:"Edit"})}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{onClick:()=>{C((0,o.fR)(v)),p()},children:"Delete"})})]})]})}}},function(e){e.O(0,[314,178,707,115,205,744],function(){return e(e.s=6929)}),_N_E=e.O()}]);